SCENARIOS = {
    "happy_hour": {
        "title": "Happy Hour - First Networking Event",
        "description": "Practice introducing yourself and making small talk at a work happy hour with new colleagues.",
        "difficulty": "Beginner",
        "image_url": "https://images.unsplash.com/photo-1688975308004-6f10feed935f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjb2ZmZWUlMjBzaG9wJTIwYmFyaXN0YXxlbnwxfHx8fDE3NjAzMjIxMTl8MA&ixlib=rb-4.1.0&q=80&w=1080",
        "turns": [
            {
                "turn_index": 1,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/happy_hour_3.mp4",
                "transcript": "Hey, nice to meet you! Where are you from? Tell me a little about yourself?"
            },
            {
                "turn_index": 2,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/happy_hour_6.mp4",
                "transcript": "I'm from Iowa! I grew up in the capital, Des Moines, but it's pretty small for a capital so it feels like a small town. How's it been settling in here? You doing anything fun this weekend?"
            },
            {
                "turn_index": 3,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/happy_hour_10.mp4",
                "transcript": "That's so cool! Hey, I've had a few of these drinks, so I gotta run to the bathroom, but it was great to meet you!"
            }
        ]
    },

    "meeting": {
        "title": "Leading a Meeting - Choosing a Brand Mascot",
        "description": "You're leading a team meeting to decide on a brand mascot for BeSpoken. Practice facilitating discussion, managing different opinions, and keeping the meeting on track.",
        "difficulty": "Intermediate",
        "image_url": "https://images.unsplash.com/photo-1615914143778-1a1a6e50c5dd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxidXNpbmVzcyUyMG1lZXRpbmclMjBvZmZpY2V8ZW58MXx8fHwxNzYwMzI3MTQyfDA&ixlib=rb-4.1.0&q=80&w=1080",
        "turns": [
            {
                "turn_index": 1,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_1vF.mp4",
                "transcript": "Ok, looks like everyone’s here! First thing’s first, you’ll need to kick off the conversation."
            },
            {
                "turn_index": 2,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_2.mp4",
                "transcript": "That was quite a strong opinion! Go ahead and respond to James."
            },
            {
                "turn_index": 3,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_4.mp4",
                "transcript": "Ok, we’ve heard about the bear and the parrot, but we’ve barely mentioned the clown. Clowns are probably best for communicating our value of celebrating mistakes—how about you offer that up to the group?"
            },
            {
                "turn_index": 4,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_5.mp4",
                "transcript": "Whoa, James is really flying off the rails here! You should encourage him to take this topic offline and bring this conversation back on track. We also haven’t heard from Francesca yet, so why don’t you ask for her perspective?"
            },
            {
                "turn_index": 5,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_6.mp4",
                "transcript": "Whoa, Francesca struck gold there! We can probably wrap this up here. You should thank Francesca for her great idea, summarize the results of the meeting, and thank everyone for participating."
            }
        ]
    },

    "hotel_checkin": {
        "title": "Check In at a Hotel",
        "description": "Master the essential phrases for checking in, asking about amenities, and getting your room key.",
        "difficulty": "Beginner",
        "image_url": "https://images.unsplash.com/photo-1759038085950-1234ca8f5fed?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxob3RlbCUyMHJlY2VwdGlvbiUyMGRlc2t8ZW58MXx8fHwxNzYwMzcwODMxfDA&ixlib=rb-4.1.0&q=80&w=1080",
        "turns": [
            {"turn_index": 1, "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_6.mp4", "transcript": "Hi there! I have a reservation under the name Ye."},
            {"turn_index": 2, "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_6.mp4", "transcript": "Can you tell me what time breakfast is served and if Wi-Fi is included?"},
            {"turn_index": 3, "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_6.mp4", "transcript": "Thank you! Could I also get an extra key card, please?"}
        ]
    },

    "airport_navigation": {
        "title": "Navigate the Airport",
        "description": "Practice handling security, customs, and finding your gate in an international airport setting.",
        "difficulty": "Advanced",
        "image_url": "https://images.unsplash.com/photo-1706544132533-c2828a971fd0?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhaXJwb3J0JTIwdGVybWluYWwlMjB0cmF2ZWx8ZW58MXx8fHwxNzYwMzcwODMyfDA&ixlib=rb-4.1.0&q=80&w=1080",
        "turns": [
            {"turn_index": 1, "video_url": "", "transcript": "Excuse me, where’s the security checkpoint for Gate C?"},
            {"turn_index": 2, "video_url": "", "transcript": "How long is the line today? My flight boards in 30 minutes."},
            {"turn_index": 3, "video_url": "", "transcript": "Thanks! Also, where can I find a place to grab a quick coffee near Gate C12?"}
        ]
    },

    "business_meeting": {
        "title": "Join a Business Meeting",
        "description": "Develop professional communication skills for introductions, presentations, and formal discussions.",
        "difficulty": "Advanced",
        "image_url": "https://images.unsplash.com/photo-1615914143778-1a1a6e50c5dd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxidXNpbmVzcyUyMG1lZXRpbmclMjBvZmZpY2V8ZW58MXx8fHwxNzYwMzI3MTQyfDA&ixlib=rb-4.1.0&q=80&w=1080",
        "turns": [
            {"turn_index": 1, "video_url": "", "transcript": "Good morning, everyone. Let’s start by reviewing last week’s action items."},
            {"turn_index": 2, "video_url": "", "transcript": "That’s a great suggestion—can you elaborate on how it might impact the timeline?"},
            {"turn_index": 3, "video_url": "", "transcript": "Thanks for the updates, team. Let’s summarize key decisions before we wrap up."}
        ]
    }
}


def get_turn_context(scenario_id: str, turn_index: int) -> dict:
    """
    Look up the scenario and turn information.
    Returns a dict with: scenario_title, scenario_description, and turn_transcript
    Returns None if scenario_id or turn_index not found.
    """
    if scenario_id not in SCENARIOS:
        return None
    
    scenario = SCENARIOS[scenario_id]
    
    # Find the turn with matching turn_index
    for turn in scenario["turns"]:
        if turn["turn_index"] == turn_index:
            return {
                "scenario_title": scenario["title"],
                "scenario_description": scenario["description"],
                "turn_transcript": turn["transcript"]
            }
    
    return None


def get_video_url(scenario_id: str, turn_index: int) -> str:
    """Returns the video URL for a given scenario and turn, or None if not found."""
    if scenario_id not in SCENARIOS:
        return None
    
    scenario = SCENARIOS[scenario_id]
    
    # Find the turn with matching turn_index
    for turn in scenario["turns"]:
        if turn["turn_index"] == turn_index:
            return turn["video_url"]
    
    return None

def get_all_scenarios():
    """Get list of all scenarios for the library."""
    return [
        {
            'id': scenario_id,
            'title': data['title'],
            'description': data['description'],
            'difficulty': data.get('difficulty', 'Beginner'),  # default if not specified
            'image_url': data.get('image_url', '')  # default empty if not specified
        }
        for scenario_id, data in SCENARIOS.items()
    ]