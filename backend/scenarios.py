SCENARIOS = {

    "campus_encounter": {
        "title": "Campus Encounter - Small Talks",
        "description": "Practice greeting friends and classmates casually around campus while building confidence in everyday small talk.",
        "difficulty": "Intermediate",
        "image_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/preview_image/campus_encounter.png",
        "turns": [
            {
                "turn_index": 1,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/Campus_encounter/campus_encounter_v1.mp4",
                "transcript": "Maddie: “Hey, what’s up? How’s it going? It’s so nice out today. What have you been up to on this beautiful Spring day?”"
            },
            {
                "turn_index": 2,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/Campus_encounter/campus_encounter_v2.mp4",
                "transcript": "Oh look, here comes Eddie. Remember, he was in our group for that marketing project a couple of weeks ago. Anyways, let’s say hi to him! To start, you can say “Hi” in a casual way – some common options are “hey, Eddie!”, “what’s up?”, or “how’s it going?” After that, let’s ask them how their quarter is going."
            },
            {
                "turn_index": 3,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/Campus_encounter/campus_encounter_v3.mp4",
                "transcript": "Maddie: “Now it’s your turn to respond – “what’s good with you” is another way to ask “how are you”. Why don’t you tell Eddie what you’ve been up to the last few weeks?”"
            },
            {
                "turn_index": 4,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/Campus_encounter/campus_encounter_v4vf.mp4",
                "transcript": "Maddie: “So we’re about to walk by Mika. You’re friendly with her, but you don’t know her that well. It might be awkward if we stop to talk, so in this case just give them a wave and one of those casual greetings like “Hi there,” “what’s up?”, or “what’s going on?”. You can quickly compliment part of her outfit if you want too.” Mika: “Hi there! Oh my god, I love your shoes!” *keeps walking*"
            },
            {
                "turn_index": 5,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/Campus_encounter/campus_encounter_v4.5.mp4",
                "transcript": "Maddie: “Nice job, that was super chill. Glad we didn’t get stuck in an awkward conversation. We’re almost to the coffeeshop, but I also see Natalie and Veronica over there. We’re going to their party this weekend. First, you should say hi with one of your new greetings and then you can tell them how excited you are for the party!”"
            },
            {
                "turn_index": 6,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/Campus_encounter/campus_encounter_v5.mp4",
                "transcript": "Ooh a themed party – that should be fun. Now you should thank them once again for the party invite and ask if you can bring anything to the party."
            },
            {
                "turn_index": 7,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/Campus_encounter/campus_encounter_v6.mp4",
                "transcript": "Awesome job making your way through all those conversations on your way here. Let’s head in!"
            }
        ]
    },


    "happy_hour": {
        "title": "Happy Hour - First Networking Event",
        "description": "Practice introducing yourself and making small talk at a work happy hour with new colleagues.",
        "difficulty": "Beginner",
        "image_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/preview_image/happy_hour",
        "turns": [
            {
                "turn_index": 1,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/happy_hour_3.mp4",
                "transcript": "Hey, nice to meet you! Where are you from? Tell me a little about yourself?"
            },
            {
                "turn_index": 2,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/happy_hour_6.mp4",
                "transcript": "I'm from Iowa! I grew up in the capital, Des Moines, but it's pretty small for a capital so it feels like a small town. How's it been settling in here? You doing anything fun this weekend?"
            },
            {
                "turn_index": 3,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/happy_hour_10.mp4",
                "transcript": "That's so cool! Hey, I've had a few of these drinks, so I gotta run to the bathroom, but it was great to meet you!"
            }
        ]
    },

    "baseball_game": {
        "title": "Baseball Game - Day Out at Wrigley Field",
        "description": "Practice chatting naturally while watching a baseball game — from learning the rules to celebrating a win with friends.",
        "difficulty": "Intermediate",
        "image_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/preview_image/baseball.png",
        "turns": [
            {
                "turn_index": 1,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/baseball/baseballv0.mp4",
                "transcript": "Hey there! I’m so glad you agreed to go to this baseball game with me!"
            },
            {
                "turn_index": 2,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/baseball/baseballv1.mp4",
                "transcript": "Wow, these seats are great! Look at this view! And it’s such a beautiful day! The baseball season is from April through September which is spring and summer throughout the United States, so the weather is almost always warm. Have you ever been to a baseball game before?"
            },
            {
                "turn_index": 3,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/baseball/baseballv2.mp4",
                "transcript": "Got it. So can you tell me what you already know about the rules of baseball?"
            },
            {
                "turn_index": 4,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/baseball/baseballv2.5.mp4",
                "transcript": "Wow, that’s great! You already know so much! All that talking has got me feeling hungry. Let’s grab some food before the game starts."
            },
            {
                "turn_index": 5,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/baseball/baseballv3.mp4",
                "transcript": "Hi, welcome to the Wrigley Field concession stand, what can I get you?"
            },
            {
                "turn_index": 6,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/baseball/baseballv4.mp4",
                "transcript": "Oh, I missed it. What just happened? (The correct answer should be along the lines of: That ball was crushed! I thought he hit it out of the ballpark! The center fielder made such a great play to catch that!)"
            },
            {
                "turn_index": 7,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/baseball/baseballv5.mp4",
                "transcript": "Oh no, I was in the bathroom. What did I miss? (The correct answer should be along the lines of: Wow, he crushed that ball! He’s such a good home run hitter! And a great catcher on defense too!)"
            },
            {
                "turn_index": 8,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/baseball/baseballv6.mp4",
                "transcript": "Wow! That was a crazy game. I’m so glad the Cubs won! Now let’s head out to the Wrigleyville bars and celebrate!"
            }
        ]
    },


    "meeting": {
        "title": "Leading a Meeting - Choosing a Brand Mascot",
        "description": "You're leading a team meeting to decide on a brand mascot for BeSpoken. Practice facilitating discussion, managing different opinions, and keeping the meeting on track.",
        "difficulty": "Intermediate",
        "image_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/preview_image/meeting",
        "turns": [
            {
                "turn_index": 1,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_1vF.mp4",
                "transcript": "Ok, looks like everyone’s here! First thing’s first, you’ll need to kick off the conversation."
            },
            {
                "turn_index": 2,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_2.mp4",
                "transcript": "That was quite a strong opinion! Go ahead and respond to James."
            },
            {
                "turn_index": 3,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_4.mp4",
                "transcript": "Ok, we’ve heard about the bear and the parrot, but we’ve barely mentioned the clown. Clowns are probably best for communicating our value of celebrating mistakes—how about you offer that up to the group?"
            },
            {
                "turn_index": 4,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_5.mp4",
                "transcript": "Whoa, James is really flying off the rails here! You should encourage him to take this topic offline and bring this conversation back on track. We also haven’t heard from Francesca yet, so why don’t you ask for her perspective?"
            },
            {
                "turn_index": 5,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_6.mp4",
                "transcript": "Whoa, Francesca struck gold there! We can probably wrap this up here. You should thank Francesca for her great idea, summarize the results of the meeting, and thank everyone for participating."
            }
        ]
    },

    "grocery_store": {
        "title": "Check Out at Whole Foods",
        "description": "Practice real-world checkout conversations at a Whole Foods-style grocery store.",
        "difficulty": "Beginner",
        "image_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/preview_image/grocery_shopping",
        "turns": [
            {
                "turn_index": 1,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/grocery_store/grocery_store_1.mp4",
                "transcript": "Hi there! Did you find everything okay today?"
            },
            {
                "turn_index": 2,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/grocery_store/grocery_Store_2.mp4",
                "transcript": "Do you want a bag?"
            },
            {
                "turn_index": 3,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/grocery_store/grocery_store_3.mp4",
                "transcript": "That’ll be twenty-three forty-five. How would you like to pay?"
            },
            {
                "turn_index": 4,
                "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/grocery_store/grocery_store_4.mp4",
                "transcript": "Here’s your receipt. Have a great day!"
            }
        ]
    },


    "testing": {
        "title": "Product testing",
        "description": "Internal testing only, do not use.",
        "difficulty": "Beginner",
        "image_url": "https://images.unsplash.com/photo-1759038085950-1234ca8f5fed?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxob3RlbCUyMHJlY2VwdGlvbiUyMGRlc2t8ZW58MXx8fHwxNzYwMzcwODMxfDA&ixlib=rb-4.1.0&q=80&w=1080",
        "turns": [
            {"turn_index": 1, "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/grocery_store_1.mp4", "transcript": "Did you find everything ok today?"},
            # {"turn_index": 2, "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_6.mp4", "transcript": "Can you tell me what time breakfast is served and if Wi-Fi is included?"},
            # {"turn_index": 3, "video_url": "https://celia-audio-test-bucket.s3.us-east-2.amazonaws.com/videos/meeting/meeting_6.mp4", "transcript": "Thank you! Could I also get an extra key card, please?"}
        ]
    }
}


def get_turn_context(scenario_id: str, turn_index: int) -> dict:
    """
    Look up the scenario and turn information.
    Returns a dict with: scenario_title, scenario_description, and turn_transcript
    Returns None if scenario_id or turn_index not found.
    """
    if scenario_id not in SCENARIOS:
        return None
    
    scenario = SCENARIOS[scenario_id]
    
    # Find the turn with matching turn_index
    for turn in scenario["turns"]:
        if turn["turn_index"] == turn_index:
            return {
                "scenario_title": scenario["title"],
                "scenario_description": scenario["description"],
                "turn_transcript": turn["transcript"]
            }
    
    return None


def get_video_url(scenario_id: str, turn_index: int) -> str:
    """Returns the video URL for a given scenario and turn, or None if not found."""
    if scenario_id not in SCENARIOS:
        return None
    
    scenario = SCENARIOS[scenario_id]
    
    # Find the turn with matching turn_index
    for turn in scenario["turns"]:
        if turn["turn_index"] == turn_index:
            return turn["video_url"]
    
    return None

def get_all_scenarios():
    """Get list of all scenarios for the library."""
    return [
        {
            'id': scenario_id,
            'title': data['title'],
            'description': data['description'],
            'difficulty': data.get('difficulty', 'Beginner'),  # default if not specified
            'image_url': data.get('image_url', '')  # default empty if not specified
        }
        for scenario_id, data in SCENARIOS.items()
    ]

def get_scenario_data(scenario_id):
    """Get full scenario data by ID."""
    return SCENARIOS.get(scenario_id)

def get_turn_question(scenario_id, turn_index):
    """Get the turn question (transcript) for a specific turn in a scenario."""
    scenario = SCENARIOS.get(scenario_id)
    if not scenario or 'turns' not in scenario:
        return None
    
    for turn in scenario['turns']:
        if turn.get('turn_index') == turn_index:
            return turn.get('transcript')
    
    return None